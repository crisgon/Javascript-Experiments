<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Local Storage</title>
</head>
<body>
  <h1>List of names</h1>
  <input type="text" data-js="inputName">  
  <button data-js="btnAddName">Add</button>
  <ul data-js="listNames"></ul>

  <script>

    let $inputName = document.querySelector('[data-js="inputName"]');
    let $btnAddName = document.querySelector('[data-js="btnAddName"]');
    let $listNames = document.querySelector('[data-js="listNames"]')
    let allNames = [];
    
    if(getNames('listName'))
      window.addEventListener('load', () => showNameList('listName'));

    $btnAddName.addEventListener('click', event => {
      event.preventDefault();
      addName(allNames, $inputName);
      clearInput($inputName);
      saveList(allNames);
      showNameList('listName')
    })

    function addName (listName, name) {
      listName.push(name.value);
    }

    function clearInput (input) {
      input.value = '';
    }

    function saveList (names) {
      localStorage.setItem('listName', allNames.join(','));
    }
    
    function getNames(names) {
      let namesList = localStorage.getItem(names);
      return namesList;
    }

    function showNameList () {
      createHtml(getNames('listName'));
    }

    function createHtml (namesList) {
      names = namesList.split(',').map(item => {
        return  `<li>${item}</li>`;
      }).join('');
      $listNames.innerHTML = names;
    }

    
  </script>
</body>
</html>